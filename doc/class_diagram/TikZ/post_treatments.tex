\begin{scope}[shift={($(Material.north) + (0 cm, 100 cm)$)}]
    \begin{package}{Post treatments}
        
        \begin{scope}[local bounding box=Widom]
            \begin{abstractclass}[text width=\smallTextWidth]{AbstractWidomMethod}{0, 0}
                \operation[0]{measureInverseActivity()}
            \end{abstractclass}
            
            \def\operationsImplementation{
                \operation{measureInverseActivity()}
            }
            
            \begin{class}[text width=\smallTextWidth]{WidomMethod}{0, -3}
                \inherit{AbstractWidomMethod}
                \operationsImplementation{}                
            \end{class}
        \end{scope}
        
        \begin{scope}[shift={($(Widom.north) + (8 cm, -2 cm)$)}]
            \begin{abstractclass}[text width=\smallTextWidth]{AbstractTestSpheres}{0, 0}
                \operation[0]{getWidomNum() : int}
            \end{abstractclass}
            
            \def\operationsImplementation{
                \operation{getWidomNum() : int}
            }
            
            \begin{class}[text width=\smallTextWidth]{TestSpheres}{0, -3}
                \inherit{AbstractTestSpheres}
                \operationsImplementation{}
            \end{class}
        \end{scope}
        
    \end{package}
\end{scope}

\begin{scope}[on background layer]
    \aggregation{AbstractWidomMethod}{thermostat}{1}{AbstractThermostat}
    \aggregation{AbstractWidomMethod}{testSpheres}{2}{AbstractTestSpheres}
    
    \aggregation{WidomMethod}{dipSpheres}{2}{AbstractDipolarSpheres}
    \aggregation{WidomMethod}{boxedSpheres}{2}{AbstractBoxedSpheres}
    \aggregation{WidomMethod}{random}{2}{AbstractRandomCoordinates}
    \aggregation{WidomMethod}{short}{2}{AbstractShortInteraction}
    \aggregation{WidomMethod}{walls}{1}{AbstractWallsInteraction}
    \aggregation{WidomMethod}{dipolar}{2}{DipolarInteractionFacade}
    \aggregation{WidomMethod}{field}{1}{AbstractFieldInteraction}
    %\compostion{ExchangeOneSphere}{observables}{3}{AbstractObservables}
\end{scope}
