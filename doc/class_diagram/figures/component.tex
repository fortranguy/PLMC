\begin{scope}[shift={($(Environment.north) + (28 cm, 0 cm)$)}]
\begin{package}{Component}
    
    \begin{scope}[opacity=1]
        \begin{abstractclass}[text width=\smallTextWidth]{ComponentNumber}{0, 0}
            \operation{set(number\type{int})}
            \operation{get()\type{int}}
        \end{abstractclass}
    \end{scope}
    
    \begin{scope}[shift={($(ComponentNumber.north) + (7 cm, 0 cm)$)}, opacity=1]
        \begin{abstractclass}[text width=\smallTextWidth]{ComponentDiameter}{0, 0}
            \operation{set(diameter\type{double}, minFactor\type{double})}
            \operation{get()\type{double}}
            \operation{getMin()\type{double}}
        \end{abstractclass}
    \end{scope}

    \begin{scope}[shift={($(ComponentDiameter.north) + (7 cm, 0 cm)$)}, opacity=1]
        \begin{abstractclass}[text width=\smallTextWidth]{ComponentMomentNorm}{0, 0}
            \operation{set(norm\type{double})}
            \operation{get()\type{double}}
        \end{abstractclass}
        \begin{comment}
            \begin{class}[text width=\smallTextWidth]{NullMomentsNorm}{0, -3}
                \inherit{ComponentMomentNorm}
            \end{class}
        \end{comment}
    \end{scope}
    
    \begin{scope}[shift={($(ComponentMomentNorm.north) + (7 cm, 0)$)}, opacity=1]
        \begin{abstractclass}[text width=\smallTextWidth]{ComponentChemicalPotential}{0, 0}
            \operation{set(density\type{double}, excess\type{double})}
            \operation{getDensity()\type{double}}
            \operation{getExcess()\type{double}}
        \end{abstractclass}
    \end{scope}

    \begin{scope}[shift={($(ComponentNumber.north) + (0 cm, 11 cm)$)}, opacity=1]
        \begin{abstractclass}[text width=\mediumTextWidth]{ComponentCoordinates}{0, 0}
            \operation[0]{set(iParticle\type{int}, vector\type{double[3]})}
            \operation[0]{getNum()\type{int}}
            \operation[0]{get(iParticle\type{int})\type{double[3]}}
            \operation[0]{add(vector\type{double[3]})}
            \operation[0]{remove(iParticle\type{int})}
        \end{abstractclass}
    \end{scope}
    
    \begin{scope}[shift={($(ComponentCoordinates.south) + (-4.5 cm, -1.5 cm)$)}, opacity=1]
        \begin{abstractclass}[text width=\mediumTextWidth]{ComponentPositions}{0, 0}
            \inherit{ComponentCoordinates}
            \operation{construct(periodicBox\type{PeriodicBox},
                                number\type{ComponentNumber})}
            \operation{detroy()}
            \operation{set(iParticle\type{int}, vector\type{double[3]})}
            \operation{getNum()\type{int}}
            \operation{get(iParticle\type{int})\type{double[3]}}
            \operation{add(vector\type{double[3]})}
            \operation{remove(iParticle\type{int})}
        \end{abstractclass}
    \end{scope}
    
    \begin{scope}[shift={($(ComponentCoordinates.south) + (4.5 cm, -1.5 cm)$)}, opacity=1]
        \begin{abstractclass}[text width=\mediumTextWidth]{ComponentOrientations}{0, 0}
            \inherit{ComponentCoordinates}
            \operation{construct(number\type{ComponentNumber})}
            \operation{detroy()}
            \operation{set(iParticle\type{int}, vector\type{double[3]})}
            \operation{getNum()\type{int}}
            \operation{get(iParticle\type{int})\type{double[3]}}
            \operation{add(vector\type{double[3]})}
            \operation{remove(iParticle\type{int})}
        \end{abstractclass}
        \begin{comment}
            \begin{class}[text width=\mediumTextWidth]{NullOrientations}{0, -5.5}
                \inherit{ComponentOrientations}
            \end{class}
        \end{comment}
    \end{scope}
    
    \begin{scope}[shift={($(ComponentCoordinates.north) + (9 cm, 0 cm)$)}, opacity=1]
        \begin{abstractclass}[text width=\mediumTextWidth]{ComponentDipolarMoments}{0, 0}
            \operation{construct(momentNorm\type{ComponentMomentNorm},
                                orientations\type{ComponentOrientations})}
            \operation{destroy()}
            \operation{getNum()\type{int}}
            \operation{get(iParticle\type{int})}
        \end{abstractclass}
    \end{scope}
    
    \begin{scope}[shift={($(ComponentDipolarMoments.north) + (9 cm, 0 cm)$)}, opacity=1]
        \begin{abstractclass}[text width=\mediumTextWidth]{ComponentTotalMoment}{0, 0}
            \operation{construct(dipolarMoment\type{ComponentDipolarMoments})}
            \operation{destroy()}
            \operation{reset()}
            \operation{get()\type{double[3]}}
            \operation{add(moment\type{double[3]})}
            \operation{remove(moment\type{double[3]})}
            %\operation{rotationUpdate(old\type{Particle}, new\type{Particle})}
            %\operation{exchangeUpdate(particle\type{Particle})}
        \end{abstractclass}
    \end{scope}
    
\end{package}
\end{scope}

\begin{scope}[on background layer]
    \aggregation{ComponentPositions}{periodicBox}{1}{PeriodicBox}
    \aggregation{ComponentPositions}{number}{1}{ComponentNumber}
    \aggregation{ComponentOrientations}{number}{1}{ComponentNumber}
    \aggregation{ComponentDipolarMoments}{momentNorm}{1}{ComponentMomentNorm}
    \aggregation{ComponentDipolarMoments}{orientations}{1}{ComponentOrientations}
    \aggregation{ComponentTotalMoment}{momentNorm}{1}{ComponentDipolarMoments}
\end{scope}
