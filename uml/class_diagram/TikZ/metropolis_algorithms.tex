\begin{scope}[shift={($(Material.north) + (0 cm, 80 cm)$)}]
    \begin{package}{Metropolis algorithms}
    
        \begin{scope}[local bounding box=Algorithm]
            %\begin{abstractclass}[text=\smallTextWidth]{EnsembleAlgorithms}{}
            \begin{abstractclass}[text width=\smallTextWidth]{AbstractMetropolisAlgorithm}{0, 0}
                \operation[0]{try()}
            \end{abstractclass}
            
            \def\operationsImplementation{
            \operation{try()}
        }
            \begin{class}[text width=\smallTextWidth]{MoveOneSphere}{-4, -3}
                \inherit{AbstractMetropolisAlgorithm}
                \operationsImplementation{}
            \end{class}
            
            \begin{class}[text width=\smallTextWidth]{RotateOneSphere}{-4, -5.5}
                \inherit{AbstractMetropolisAlgorithm}
                \operationsImplementation{}
            \end{class}
            
            \begin{class}[text width=\smallTextWidth]{SwitchTwoSpheres}{4, -3}
                \inherit{AbstractMetropolisAlgorithm}
                \operationsImplementation{}
            \end{class}
            
            \begin{class}[text width=\smallTextWidth]{ExchangeOneSphere}{4, -5.5}
                \inherit{AbstractMetropolisAlgorithm}
                \operationsImplementation{}
            \end{class}
        \end{scope}

    \end{package}
\end{scope}

\begin{scope}[on background layer]
    \aggregation{MoveOneSphere}{spheres}{2}{AbstractDipolarSpheres}
    \aggregation{MoveOneSphere}{boxed}{2}{AbstractBoxedSpheres}
    \aggregation{MoveOneSphere}{change}{2}{AbstractSmallChange}
    \aggregation{MoveOneSphere}{short}{2}{ShortInteractionFacade}
    \aggregation{MoveOneSphere}{dipolar}{2}{DipolarInteractionFacade}
    %\compostion{MoveOneSphere}{observables}{3}{AbstractObservables}
    
    \aggregation{RotateOneSphere}{spheres}{2}{AbstractDipolarSpheres}
    \aggregation{RotateOneSphere}{change}{2}{AbstractSmallChange}
    \aggregation{RotateOneSphere}{dipolar}{2}{DipolarInteractionFacade}
    %\compostion{RotateOneSphere}{observables}{3}{AbstractObservables}
    
    \aggregation{SwitchTwoSpheres}{spheres}{2}{AbstractDipolarSpheres}
    \aggregation{SwitchTwoSpheres}{boxed}{2}{AbstractBoxedSpheres}
    \aggregation{SwitchTwoSpheres}{change}{2}{AbstractSmallChange}
    \aggregation{SwitchTwoSpheres}{short}{2}{ShortInteractionFacade}
    \aggregation{SwitchTwoSpheres}{dipolar}{2}{DipolarInteractionFacade}
    %\compostion{SwitchTwoSpheres}{observables}{3}{AbstractObservables}
\end{scope}
