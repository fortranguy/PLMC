\documentclass{standalone}

\usepackage{luatex85}
\renewcommand{\familydefault}{\sfdefault}
\input figures/figures.sty

\begin{document}

    \begin{tikzpicture}[scale=\scale, every node/.style={scale=\scale}]

        \begin{scope}
            \begin{abstractclass}[text width=\mediumTextWidth]{GeneratingAlgorithm}{0, 0}
                \operation[0]{\procedure{construct}{\ldots}}
                \operation[0]{\procedure{destroy}{}}
                \operation{\procedure{resetSelectors}{}}
                \operation[0]{\procedure{getNumChoices}{}: \type{int}}
                \operation[0]{\procedure{try}{observables: \type{Observables}}}
            \end{abstractclass}
        \end{scope}

        \begin{scope}[shift={($(GeneratingAlgorithm.north) + (0 cm, 8 cm)$)}]
            \begin{abstractclass}[text width=\largeTextWidth]{BoxParticleMove}{0, 0}
                \inherit{GeneratingAlgorithm}
                \operation{\procedure{construct}{$\mathAggregation$ environment: \type{Environment},
                    $\mathAggregation$ mixture: \type{Mixture},
                    $\mathAggregation$ shortInteractions: \type{ShortInteractions},
                    $\mathAggregation$ dipolarInteractionsDynamic:
                        \type{DipolarInteractionsDynamic[\numBoxes]},
                    $\mathAggregation$ dipolarInteractionsStatic:
                        \type{DipolarInteractionsStatic[\numBoxes]},
                    $\mathAggregation$ changesComponents:
                        \type{ChangesComponent[\numComponents, \numBoxes]},
                    canMove: \type{bool[\numComponents, \numBoxes]},
                    $\mathComposition$ selectors: \type{TowerSampler[\numBoxes]}}}
            \end{abstractclass}
        \end{scope}

        \begin{scope}[shift={($(BoxParticleMove.north) + (9 cm, 0 cm)$)}]
            \coordinate (Import) at (0, 0);
            \umlnote[text width=\largeTextWidth]{\import{}:\\
                \namespace{Common} :: HeteroCouples \\
                \namespace{Random} :: TowerSampler \\
                \namespace{Environment} :: Environment \\
                \namespace{Mixture} :: Mixture, Component \\
                \namespace{ShortInteractions} :: ShortInteractions \\
                \namespace{DipolarInteractions} :: DipolarInteractionsDynamic,
                    DipolarInteractionsStatic, DipolarInteractionsFacade \\
                \namespace{Changes} :: ChangesComponent, Changes, ChangedBoxSize \\
                \namespace{Observables} :: Observables};
        \end{scope}

        \begin{scope}[shift={($(GeneratingAlgorithm.north -| Import)$)}]
            \begin{class}[text width=\largeTextWidth]{BoxVolumeChange}{0, 0}
                \inherit{GeneratingAlgorithm}
                \operation{\procedure{construct}{$\mathAggregation$ environment: \type{Environment},
                    $\mathAggregation$ mixture: \type{Mixture},
                    $\mathAggregation$ shortInteractions: \type{ShortInteractions},
                    $\mathAggregation$ dipolarInteractionsFacade:
                        \type{DipolarInteractionsFacade[\numBoxes]},
                    $\mathAggregation$ changedBoxSize: \type{ChangedBoxSize},
                    havePositions: \type{bool[\numComponents]},
                    $\mathComposition$ selectors: \type{TowerSampler[\numBoxes]}}}
            \end{class}
        \end{scope}

        \begin{scope}[shift={($(BoxParticleMove.north) - (9 cm, 0 cm)$)}]
            \begin{abstractclass}[text width=\largeTextWidth]{BoxParticleExchange}{0, 0}
                \inherit{GeneratingAlgorithm}
                \operation{\procedure{construct}{$\mathAggregation$ environment: \type{Environment},
                    $\mathAggregation$ mixture: \type{Mixture},
                    $\mathAggregation$ shortInteractions: \type{ShortInteractions},
                    $\mathAggregation$ dipolarInteractionsDynamic:
                        \type{DipolarInteractionsDynamic[\numBoxes]},
                    $\mathAggregation$ dipolarInteractionsStatic:
                        \type{DipolarInteractionsStatic[\numBoxes]},
                    $\mathAggregation$ changes: \type{Changes},
                    canExchange: \type{bool[\numComponents]},
                    $\mathComposition$ selectors: \type{TowerSampler[\numBoxes]}}}
            \end{abstractclass}
        \end{scope}

        \begin{scope}[shift={($(BoxParticleExchange.south) - (0 cm, 1.5 cm)$)}]
            \begin{abstractclass}[text width=\largeTextWidth]{BoxParticlesSwap}{0, 0}
                \inherit{GeneratingAlgorithm}
                \operation{\procedure{construct}{$\mathAggregation$ environment: \type{Environment},
                    $\mathAggregation$ mixture: \type{Mixture},
                    $\mathAggregation$ shortInteractions: \type{ShortInteractions},
                    $\mathAggregation$ dipolarInteractionsDynamic:
                        \type{DipolarInteractionsDynamic[\numBoxes]},
                    $\mathAggregation$ dipolarInteractionsStatic:
                        \type{DipolarInteractionsStatic[\numBoxes]},
                    $\mathAggregation$ changes: \type{Changes},
                    canSwap: \type{bool[\numComponents]},
                    $\mathComposition$ couples: \type{HeteroCouples},
                    $\mathComposition$ selectors: \type{TowerSampler[\numBoxes]}}}
            \end{abstractclass}
        \end{scope}

        \begin{scope}[shift={($(BoxParticlesSwap.south) - (0 cm, 1.5 cm)$)}]
            \begin{class}[text width=\largeTextWidth]{BoxesParticlesSwitch}{0, 0}
                \inherit{GeneratingAlgorithm}
                \operation{\procedure{construct}{}}
            \end{class}
        \end{scope}

        \begin{scope}[shift={($(BoxVolumeChange.south) - (0 cm, 1.5 cm)$)}]
            \begin{class}[text width=\largeTextWidth]{BoxesVolumeChange}{0, 0}
                \inherit{GeneratingAlgorithm}
                \operation{\procedure{construct}{}}
            \end{class}
        \end{scope}

        \begin{scope}[shift={($(BoxesParticlesSwitch.north)!0.5!(BoxesVolumeChange.north) -
            (0 cm, 0 cm)$)}]
            \begin{class}[text width=\largeTextWidth]{BoxesParticleTeleportation}{0, 0}
                \inherit{GeneratingAlgorithm}
                \operation{\procedure{construct}{$\mathAggregation$ environment: \type{Environment},
                $\mathAggregation$ mixture: \type{Mixture},
                $\mathAggregation$ shortInteractions: \type{ShortInteractions},
                $\mathAggregation$ dipolarInteractionsDynamic:
                    \type{DipolarInteractionsDynamic[\numBoxes]},
                $\mathAggregation$ dipolarInteractionsStatic:
                    \type{DipolarInteractionsStatic[\numBoxes]},
                $\mathAggregation$ changes: \type{Changes},
                canMove: \type{bool[\numComponents, \numBoxes]},
                $\mathComposition$ boxCouples: \type{HeteroCouples},
                $\mathComposition$ boxesSelector: \type{TowerSampler},
                $\mathComposition$ componentSelectors: \type{TowerSampler[\numBoxes]}}}
            \end{class}
        \end{scope}

    \end{tikzpicture}

\end{document}
