\begin{scope}[shift={($(Material.north) + (0 cm, 100 cm)$)}]
    \begin{package}{Post treatments}
        
        \begin{scope}[local bounding box=Widom]
            \begin{abstractclass}[text width=\smallTextWidth]{WidomMethod}{0, 0}
                \operation[0]{measureInverseActivity()}
            \end{abstractclass}
            
            \def\operationsImplementation{
                \operation{measureInverseActivity()}
            }
            
            \begin{class}[text width=\smallTextWidth]{WidomMethod}{0, -3}
                \inherit{WidomMethod}
                \operationsImplementation{}
            \end{class}
        \end{scope}
        
        \begin{scope}[shift={($(Widom.north) + (8 cm, -2 cm)$)}]
            \begin{abstractclass}[text width=\smallTextWidth]{TestSpheres}{0, 0}
                \operation[0]{getWidomNum() : int}
            \end{abstractclass}
            
            \def\operationsImplementation{
                \operation{getWidomNum() : int}
            }
            
            \begin{class}[text width=\smallTextWidth]{TestSpheres}{0, -3}
                \inherit{TestSpheres}
                \operationsImplementation{}
            \end{class}
        \end{scope}
        
    \end{package}
\end{scope}

\begin{scope}[on background layer]
    \aggregation{WidomMethod}{thermostat}{1}{Thermostat}
    \aggregation{WidomMethod}{testSpheres}{2}{TestSpheres}
    
    \aggregation{WidomMethod}{dipSpheres}{2}{DipolarSpheres}
    \aggregation{WidomMethod}{boxedSpheres}{2}{BoxedSpheres}
    \aggregation{WidomMethod}{random}{2}{RandomCoordinatesFacade}
    \aggregation{WidomMethod}{short}{2}{ShortInteraction}
    \aggregation{WidomMethod}{walls}{1}{WallsInteraction}
    \aggregation{WidomMethod}{dipolar}{2}{DipolarInteractionFacade}
    \aggregation{WidomMethod}{field}{1}{FieldInteraction}
    %\compostion{ExchangeOneSphere}{observables}{3}{Observables}
\end{scope}
